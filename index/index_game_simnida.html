<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="/styles/style_base_numder_word.css">
    <title>Korean Particles Game</title>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        /* body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
            color: #333;
            min-height: 100vh;
        } */
        
        .main-container {
            display: flex;
            justify-content: center;
            flex-direction: row;
            gap: 20px;
            max-width: 950px;
            margin: 0 auto;
        }
        
        .game-container {
            width: 500px;
            height: 600px;
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            border: 4px solid #1a237e;
            position: relative;
            overflow: hidden;
        }
        
        .word-bank-container {
            width: 400px;
            height: 600px;
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            border: 4px solid #1a237e;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .game-container::before,
        .word-bank-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                rgba(255,255,255,0) 0%,
                rgba(255,255,255,0.8) 50%,
                rgba(255,255,255,0) 100%
            );
            animation: shine 3s infinite;
            z-index: 0;
        }
        
        @keyframes shine {
            0% { transform: rotate(45deg) translate(-30%, -30%); }
            100% { transform: rotate(45deg) translate(30%, 30%); }
        }
        
        .game-section,
        .word-bank-section {
            position: relative;
            z-index: 1;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .word-bank {
            margin-top: 20px;
            background-color: #e8f4f8;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            flex-grow: 1;
            overflow-y: auto;
        }
        
        h2, h3 {
            color: #2c3e50;
            text-align: center;
            margin-top: 0;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫—É–±–∏–∫–æ–≤ */
        .cube {
            display: inline-block;
            width: 60px;
            height: 60px;
            margin: 5px;
            background-color: #3498db;
            color: white;
            font-size: 24px;
            text-align: center;
            line-height: 60px;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
            transition: all 0.3s;
            position: relative;
        }
        
        .cube.vowel {
            background-color: #e74c3c;
        }
        
        .cube.consonant {
            background-color: #2980b9;
        }
        
        .cube.ending {
            background-color: #2ecc71;
        }
        
        .cube.dark {
            background-color: #34495e;
        }
        
        .cube.merged {
            background-color: #f1c40f;
            color: #000;
        }
        
        .cube.wrong {
            background-color: #e74c3c;
            position: relative;
        }
        
        .cube.wrong::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 3px;
            background-color: black;
            transform: rotate(-45deg);
        }
        
        .cube.particle {
            cursor: pointer;
        }
        
        .cube.particle.selected {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
        }
        
        .cube.particle-correct {
            background-color: #27ae60;
        }
        
        .cube.correct-ending {
            background-color: #1e6f3d;
        }
        
        .cube.ending-wrong {
            background-color: #e74c3c;
        }
        
        .cube.ending-wrong::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 3px;
            background-color: black;
            transform: rotate(-45deg);
        }
        
        .cube.fade-out {
            animation: fadeOut 0.5s forwards;
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0); }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –æ–∫–æ–Ω—á–∞–Ω–∏–π */
        .ending-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            background-color: #3498db;
            color: white;
            margin: 5px;
        }
        
        .ending-btn.selected {
            background-color: #1e6f3d;
            transform: scale(1.05);
        }
        
        .ending-btn.wrong {
            background-color: #e74c3c;
            position: relative;
        }
        
        .ending-btn.wrong::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 3px;
            background-color: black;
            transform: rotate(-45deg);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes celebrate {
            0% { transform: scale(1); }
            25% { transform: scale(1.2) rotate(10deg); }
            50% { transform: scale(1.1) rotate(-10deg); }
            75% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1); }
        }
        
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }
        
        @keyframes moveDown {
            0% { transform: translateY(0); }
            100% { transform: translateY(60px); }
        }
        
        @keyframes moveToVowel {
            0% { transform: translateY(60px) translateX(0); }
            100% { transform: translateY(60px) translateX(-60px); }
        }
        
        @keyframes merge {
            0% { transform: scale(1); margin: 5px; }
            50% { transform: scale(1.05); margin: 0 2px; }
            100% { transform: scale(1); margin: 0; }
        }
        
        @keyframes slideIn {
            0% { transform: translateX(100px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes attachToWord {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); margin-left: 0; }
        }
        
        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        .game-board {
            min-height: 200px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        /* –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .sound-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .reset-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .input-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .input-btn {
            background-color: #510068cf;
            color: white;
            padding: 10px 15px;
            font-size: 14px;
            height: 40px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        /* –ë–∞–Ω–∫ —Å–ª–æ–≤ */
        .word-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        
        .word-item {
            padding: 10px;
            background-color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .word-item:hover {
            background-color: #d6eaf8;
            transform: translateY(-2px);
        }
        
        /* –°–º–∞–π–ª–∏–∫–∏ */
        .emoji {
            font-size: 40px;
            text-align: center;
            margin: 10px 0;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .happy {
            color: #f1c40f;
        }
        
        .sad {
            color: #7f8c8d;
        }
        
        /* –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ */
        .input-form {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .input-form input {
            height: 50px;
            width: 200px;
            font-size: 30px;
            font-weight: 700;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        
        .particles-container {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .endings-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
            width: 100%;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        /* –ë–æ–ª—å—à–∏–µ —ç–∫—Ä–∞–Ω—ã (1441px –∏ –≤—ã—à–µ) */
        @media (min-width: 1441px) {
            .main-container {
                max-width: 1200px;
            }
            .game-container {
                width: 600px;
            }
            .word-bank-container {
                width: 500px;
            }
            .cube {
                width: 70px;
                height: 70px;
                line-height: 70px;
                font-size: 28px;
            }
            .word-item {
                font-size: 16px;
                padding: 8px 12px;
            }
        }
        
        /* –°—Ä–µ–¥–Ω–∏–µ —ç–∫—Ä–∞–Ω—ã (786px - 1440px) */
        @media (max-width: 1440px) and (min-width: 786px) {
            .main-container {
                max-width: 950px;
            }
            .game-container {
                width: 500px;
            }
            .word-bank-container {
                width: 400px;
            }
            .cube {
                width: 60px;
                height: 60px;
                line-height: 60px;
                font-size: 24px;
            }
        }
        
        /* –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (250px - 785px) */
        @media (max-width: 785px) {
            .main-container {
                flex-direction: column;
                align-items: center;
            }
            .game-container,
            .word-bank-container {
                width: 100%;
                max-width: 500px;
            }
            .input-form {
                flex-direction: column;
            }
            .input-form input {
                width: 100%;
            }
            .cube {
                width: 40px;
                height: 40px;
                line-height: 40px;
                font-size: 20px;
            }
            .word-item {
                font-size: 12px;
                padding: 4px 8px;
            }
            button {
                padding: 8px 16px;
                font-size: 14px;
            }
        }
        
 @media (max-width: 500px){
     .cube {
                width: 30px;
                height:30px;
                line-height: 30px;
                font-size: 16px;
            }

 }

        /* –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —ç–∫—Ä–∞–Ω—ã (–¥–æ 250px) */
        @media (max-width: 250px) {
            .game-container,
            .word-bank-container {
                padding: 10px;
            }
            .cube {
                width: 40px;
                height: 40px;
                line-height: 40px;
                font-size: 16px;
                margin: 3px;
            }
            .input-form input {
                height: 40px;
                font-size: 20px;
            }
            button {
                padding: 6px 12px;
                font-size: 12px;
            }
            .word-item {
                font-size: 10px;
                padding: 2px 4px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="burger-menu" id="burgerMenu">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <img class="logo" src="/image/logo krug.svg" alt="–õ–æ–≥–æ—Ç–∏–ø">
            <a href="" class="user"> <img class="lk" src="/image/userrblur.svg" alt="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"></a>
        </div>
        <nav class="nav-burger" id="navBurger">
            <ul class="ul-header">
                <li class="li-header"> <a href="" class="a-header">–æ–Ω–ª–∞–π–Ω - –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫</a></li>
                <li class="li-header"> <a href="" class="a-header">–∫–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                <li class="li-header"> <a href="" class="a-header">—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</a></li>
            </ul>
        </nav>
    </header>
    <main>
    <div class="main-container">
        <!-- –ò–≥—Ä–æ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
        <div class="game-container">
            <div class="game-section">
                <h2>„ÖÇÎãàÎã§/ÏäµÎãàÎã§</h2>
                <div class="emoji" id="mnidaEmoji"></div>
                <div class="game-board" id="mnidaBoard">
                    <div id="mnidaOriginalCubes"></div>
                    <div id="mnidaRootCubes" style="display:none;"></div>
                    <div id="mnidaCombinedCubes" style="display:none;"></div>
                    <div id="mnidaCorrectCubes" style="display:none;"></div>
                </div>
                
                <div class="input-form" id="mnidaInputForm">
                    <input type="text" id="mnidaWordInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–ª–∞–≥–æ–ª/–ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ" onkeypress="handleKeyPress(event, 'mnida')">
                    <!-- <button class="input-btn" onclick="checkMnidaWord()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button> -->
                    <div class="endings-container">
                        
                        <button class="ending-btn" id="mnidaBtn" onclick="selectEnding('mnida')">„ÖÇÎãàÎã§</button>
                        <button class="ending-btn" id="seumnidaBtn" onclick="selectEnding('seumnida')">ÏäµÎãàÎã§</button>
                    </div>
                </div>
                
                <div class="controls">
                       <button class="input-btn" onclick="checkMnidaWord()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <button class="sound-btn" onclick="speakKorean(document.getElementById('mnidaCombinedCubes')?.textContent || '')">
                        üîä –ü—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏
                    </button>
                    <button class="reset-btn" onclick="resetMnidaGame()">–°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
            </div>
        </div>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–∞–Ω–∫–∞ —Å–ª–æ–≤ -->
        <div class="word-bank-container">
            <div class="word-bank-section">
                <h3>–°–ª–æ–≤–∞ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>
                <div class="word-bank">
                    <div class="word-list" id="verbList">
                        <!-- –°–ª–æ–≤–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    </main>

    <div class="perehod">
        <a href="/index/index_game_nin.html"><img src="/image/vlevo2.svg" alt=""></a>
        <a href="/index/index_game_mnika.html"><img src="/image/vpravo2.svg" alt=""></a>
    </div>

    <footer>
        <section class="footer container">
            <address>
                <div class="footer1">
                    <div class="tel">
                        <img src="/image/tel_blue.svg" alt="">
                        <p>8-925-685-52-39 </p>
                    </div>
                    <div class="mail">
                        <p>anastasiya3000@yandex.ru</p>
                    </div>
                    <div class="footer-icon">
                        <a href="" class="social-icon"> <img src="/image/telegram_icon 1.svg" alt=""></a>
                        <a href="" class="social-icon"> <img src="/image/skype_icon 1.svg" alt=""></a>
                        <a href="" class="social-icon"><img src="/image/whatsapp_green.png" alt=""></a>
                        <a href="" class="social-icon"> <img src="/image/license.svg" alt=""></a>
                    </div>
                </div>

                <div class="footer2">
                    <nav class="nav1-footer">
                        <ul class="ul-footer">
                            <div class="f-li">
                                <li class="li-footer"> <a href="" class="a-footer"><b>–ü—Ä–∞–≤–∏–ª–∞ –æ–ø–ª–∞—Ç—ã</b></a></li>
                                <li class="li-footer"> <a href="" class="a-footer"><b>–î–æ–≥–æ–≤–æ—Ä –æ—Ñ–µ—Ä—Ç—ã</b></a></li>
                                <li class="li-footer"> <a href="" class="a-footer"><b>–°–æ–≥–ª–∞—Å–∏–µ —Å —Ä–∞—Å—Å—ã–ª–∫–æ–π</b></a></li>
                                <li class="li-footer"><a href="" class="a-footer"><b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</b></a>
                                </li>
                                <li class="li-footer"> <a href="" class="a-footer"><b>–ü–æ–ª–∏—Ç–∏–∫–∞
                                            –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</b></a></li>
                                <li class="li-footer"> <a href="" class="a-footer"><b>–ü–æ–ª–æ–∂–µ–Ω–∏–µ –æ –∑–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö
                                            –¥–∞–Ω–Ω—ã—Ö</b></a></li>
                            </div>
                        </ul>
                    </nav>
                </div>
            </address>
        </section>

        <div class="copyright">
            <img id="copyright" src="/image/Copyright2 _ blue.svg" alt="copyright">
            <p>takiza, 2025</p>
        </div>
    </footer>

    <script>
        const burgerMenu = document.getElementById("burgerMenu");
        const navBurger = document.getElementById("navBurger");

        burgerMenu.addEventListener("click", function (event) {
            event.stopPropagation();
            navBurger.classList.toggle("active");
        });

        document.addEventListener("click", function (event) {
            if (!navBurger.contains(event.target) && !burgerMenu.contains(event.target)) {
                navBurger.classList.remove("active");
            }
        });

        function toggleBurger() {
            const part1 = document.querySelector('.burger-part1');
            const part2 = document.querySelector('.burger-part2');

            if (part1.style.display === 'none') {
                part1.style.display = 'block';
                part2.style.display = 'none';
            } else {
                part1.style.display = 'none';
                part2.style.display = 'block';
            }
        }

        /* –°–≤–∞–π–ø –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            if (touchEndX < touchStartX - swipeThreshold) {
                nextWord();
            } else if (touchEndX > touchStartX + swipeThreshold) {
                previousWord();
            }
        }

        function nextWord() {
            // Implement next word functionality
        }

        function previousWord() {
            // Implement previous word functionality
        }
    </script>

    <script>
  // –°–ª–æ–≤–∞—Ä—å —Å–ª–æ–≤ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
const trainingWords = {
    verbs: [
        { word: "Í∞ÄÎã§", meaning: "–∏–¥—Ç–∏ (–æ—Ç –≥–æ–≤–æ—Ä—è—â–µ–≥–æ)" },
        { word: "Ïò§Îã§", meaning: "–∏–¥—Ç–∏ (–∫ –≥–æ–≤–æ—Ä—è—â–µ–º—É)" },
        { word: "Í±±Ï†ïÌïòÎã§", meaning: "–±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è" },
        { word: "Í≥µÎ∂ÄÌïòÎã§", meaning: "—É—á–∏—Ç—å—Å—è" },
        { word: "ÎÜçÎã¥ÌïòÎã§", meaning: "—à—É—Ç–∏—Ç—å" },
        { word: "ÎßåÎÇòÎã§", meaning: "–≤—Å—Ç—Ä–µ—á–∞—Ç—å" },
        { word: "ÎßåÎì§Îã§", meaning: "–¥–µ–ª–∞—Ç—å" },
        { word: "ÎßêÌïòÎã§", meaning: "–≥–æ–≤–æ—Ä–∏—Ç—å" },
        { word: "Î®πÎã§", meaning: "–µ—Å—Ç—å" },
        { word: "Î≥¥Îã§", meaning: "—Å–º–æ—Ç—Ä–µ—Ç—å" },
        { word: "ÌïòÎã§", meaning: "–¥–µ–ª–∞—Ç—å" },
        { word: "ÏùΩÎã§", meaning: "—á–∏—Ç–∞—Ç—å" },
        { word: "Ïì∞Îã§", meaning: "–ø–∏—Å–∞—Ç—å" },
        { word: "ÏÉùÍ∞ÅÌïòÎã§", meaning: "–¥—É–º–∞—Ç—å" },
        { word: "ÏïåÎã§", meaning: "–∑–Ω–∞—Ç—å" },
        { word: "Î™®Î•¥Îã§", meaning: "–Ω–µ –∑–Ω–∞—Ç—å" },
        { word: "Í∏∞ÏñµÌïòÎã§", meaning: "–ø–æ–º–Ω–∏—Ç—å" },
        { word: "ÏûäÎã§", meaning: "–∑–∞–±—ã–≤–∞—Ç—å" },
        { word: "ÏõêÌïòÎã§", meaning: "—Ö–æ—Ç–µ—Ç—å" },
        { word: "Ï¢ãÏïÑÌïòÎã§", meaning: "–Ω—Ä–∞–≤–∏—Ç—å—Å—è" },
        { word: "Ïã´Ïñ¥ÌïòÎã§", meaning: "–Ω–µ –Ω—Ä–∞–≤–∏—Ç—å—Å—è" },
        { word: "ÎèÑÏôÄÏ£ºÎã§", meaning: "–ø–æ–º–æ–≥–∞—Ç—å" },
        { word: "Í∏∞Îã§Î¶¨Îã§", meaning: "–∂–¥–∞—Ç—å" },
        { word: "Ìó§Ïñ¥ÏßÄÎã§", meaning: "—Ä–∞—Å—Å—Ç–∞–≤–∞—Ç—å—Å—è" },
        { word: "ÏÇ¨Îã§", meaning: "–ø–æ–∫—É–ø–∞—Ç—å" },
        { word: "ÌåîÎã§", meaning: "–ø—Ä–æ–¥–∞–≤–∞—Ç—å" },
        { word: "Ï£ºÎã§", meaning: "–¥–∞–≤–∞—Ç—å" },
        { word: "Î∞õÎã§", meaning: "–ø–æ–ª—É—á–∞—Ç—å" },
        { word: "Í∞ÄÏßÄÎã§", meaning: "–∏–º–µ—Ç—å" },
        { word: "Ï∞æÎã§", meaning: "–∏—Å–∫–∞—Ç—å" },
        { word: "ÏûÉÎã§", meaning: "—Ç–µ—Ä—è—Ç—å" },
        { word: "Î≥¥ÎÇ¥Îã§", meaning: "–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å" },
        { word: "ÎèÑÏ∞©ÌïòÎã§", meaning: "–ø—Ä–∏–±—ã–≤–∞—Ç—å" },
        { word: "Ï∂úÎ∞úÌïòÎã§", meaning: "–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è" },
        { word: "Ïù¥ÏÇ¨ÌïòÎã§", meaning: "–ø–µ—Ä–µ–µ–∑–∂–∞—Ç—å" },
        { word: "ÏÇ¥Îã§", meaning: "–∂–∏—Ç—å" },
        { word: "Ï£ΩÎã§", meaning: "—É–º–∏—Ä–∞—Ç—å" },
        { word: "ÌÉúÏñ¥ÎÇòÎã§", meaning: "—Ä–æ–∂–¥–∞—Ç—å—Å—è" },
        { word: "Í∞ÄÎ•¥ÏπòÎã§", meaning: "—É—á–∏—Ç—å" },
        { word: "ÏùºÌïòÎã§", meaning: "—Ä–∞–±–æ—Ç–∞—Ç—å" },
        { word: "Ïâ¨Îã§", meaning: "–æ—Ç–¥—ã—Ö–∞—Ç—å" },
        { word: "ÎÜÄÎã§", meaning: "–∏–≥—Ä–∞—Ç—å" },
        { word: "Ïö¥ÎèôÌïòÎã§", meaning: "–∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º" },
        { word: "Í±∑Îã§", meaning: "–≥—É–ª—è—Ç—å" },
        { word: "Îõ∞Îã§", meaning: "–±–µ–∂–∞—Ç—å" },
        { word: "Ï∂§Ï∂îÎã§", meaning: "—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å" },
        { word: "ÎÖ∏ÎûòÌïòÎã§", meaning: "–ø–µ—Ç—å" },
        { word: "Í∑∏Î¶¨Îã§", meaning: "—Ä–∏—Å–æ–≤–∞—Ç—å" },
        { word: "Í≥†ÏπòÎã§", meaning: "—á–∏–Ω–∏—Ç—å" },
        { word: "ÏîªÎã§", meaning: "–º—ã—Ç—å" },
        { word: "Îã¶Îã§", meaning: "–≤—ã—Ç–∏—Ä–∞—Ç—å" },
        { word: "ÏöîÎ¶¨ÌïòÎã§", meaning: "–≥–æ—Ç–æ–≤–∏—Ç—å" },
        { word: "ÎßàÏãúÎã§", meaning: "–ø–∏—Ç—å" },
        { word: "ÏûÖÎã§", meaning: "–Ω–∞–¥–µ–≤–∞—Ç—å" },
        { word: "Î≤óÎã§", meaning: "—Å–Ω–∏–º–∞—Ç—å" },
        { word: "Ïã†Îã§", meaning: "–Ω–∞–¥–µ–≤–∞—Ç—å (–æ–±—É–≤—å)" },
        { word: "ÎπóÎã§", meaning: "—Ä–∞—Å—á–µ—Å—ã–≤–∞—Ç—å" },
        { word: "ÏûêÎ•¥Îã§", meaning: "—Ä–µ–∑–∞—Ç—å" },
        { word: "Î∂àÎã§", meaning: "–¥—É—Ç—å" },
        { word: "ÏãúÏûëÌïòÎã§", meaning: "–Ω–∞—á–∏–Ω–∞—Ç—å" },
        { word: "ÎÅùÎÇòÎã§", meaning: "–∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å" },
        { word: "Ïó¥Îã§", meaning: "–æ—Ç–∫—Ä—ã–≤–∞—Ç—å" },
        { word: "Îã´Îã§", meaning: "–∑–∞–∫—Ä—ã–≤–∞—Ç—å" },
        { word: "Îì§Ïñ¥Ïò§Îã§", meaning: "–≤—Ö–æ–¥–∏—Ç—å" },
        { word: "ÎÇòÍ∞ÄÎã§", meaning: "–≤—ã—Ö–æ–¥–∏—Ç—å" },
        { word: "ÏïâÎã§", meaning: "—Å–∏–¥–µ—Ç—å" },
        { word: "ÏùºÏñ¥ÎÇòÎã§", meaning: "–≤—Å—Ç–∞–≤–∞—Ç—å" },
        { word: "ÏûêÎã§", meaning: "—Å–ø–∞—Ç—å" },
        { word: "Íπ®Îã§", meaning: "–ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è" },
        { word: "ÏõÉÎã§", meaning: "—Å–º–µ—è—Ç—å—Å—è" },
        { word: "Ïö∏Îã§", meaning: "–ø–ª–∞–∫–∞—Ç—å" },
        { word: "Îì£Îã§", meaning: "—Å–ª—É—à–∞—Ç—å" }
    ],
    adjectives: [
        { word: "Ï¢ãÎã§", meaning: "—Ö–æ—Ä–æ—à–∏–π" },
        { word: "ÎÇòÏÅòÎã§", meaning: "–ø–ª–æ—Ö–æ–π" },
        { word: "ÌÅ¨Îã§", meaning: "–±–æ–ª—å—à–æ–π" },
        { word: "ÏûëÎã§", meaning: "–º–∞–ª–µ–Ω—å–∫–∏–π" },
        { word: "ÎßõÏûàÎã§", meaning: "–≤–∫—É—Å–Ω—ã–π" },
        { word: "ÎßõÏóÜÎã§", meaning: "–Ω–µ–≤–∫—É—Å–Ω—ã–π" },
        { word: "ÎπÑÏã∏Îã§", meaning: "–¥–æ—Ä–æ–≥–æ–π" },
        { word: "Ïã∏Îã§", meaning: "–¥–µ—à–µ–≤—ã–π" },
        { word: "Îπ†Î•¥Îã§", meaning: "–±—ã—Å—Ç—Ä—ã–π" },
        { word: "ÎäêÎ¶¨Îã§", meaning: "–º–µ–¥–ª–µ–Ω–Ω—ã–π" },
        { word: "ÏòàÏÅòÎã§", meaning: "–∫—Ä–∞—Å–∏–≤—ã–π" },
        { word: "ÎòëÎòëÌïòÎã§", meaning: "—É–º–Ω—ã–π" },
        { word: "ÌñâÎ≥µÌïòÎã§", meaning: "—Å—á–∞—Å—Ç–ª–∏–≤—ã–π" },
        { word: "Ïä¨ÌîÑÎã§", meaning: "–≥—Ä—É—Å—Ç–Ω—ã–π" },
        { word: "Îç•Îã§", meaning: "–∂–∞—Ä–∫–æ" },
        { word: "Ï∂•Îã§", meaning: "—Ö–æ–ª–æ–¥–Ω–æ" },
        { word: "Î∞∞Í≥†ÌîÑÎã§", meaning: "–≥–æ–ª–æ–¥–Ω—ã–π" },
        { word: "Î™©ÎßàÎ•¥Îã§", meaning: "—Ö–æ—Ç–µ—Ç—å –ø–∏—Ç—å" },
        { word: "ÌîºÍ≥§ÌïòÎã§", meaning: "—É—Å—Ç–∞–ª—ã–π" },
        { word: "ÏïÑÌîÑÎã§", meaning: "–±–æ–ª—å–Ω–æ–π" },
        { word: "Í±¥Í∞ïÌïòÎã§", meaning: "–∑–¥–æ—Ä–æ–≤—ã–π" },
        { word: "Ïû¨ÎØ∏ÏûàÎã§", meaning: "–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π" },
        { word: "Ïû¨ÎØ∏ÏóÜÎã§", meaning: "—Å–∫—É—á–Ω—ã–π" },
        { word: "Ïñ¥Î†µÎã§", meaning: "—Ç—Ä—É–¥–Ω—ã–π" },
        { word: "ÏâΩÎã§", meaning: "–ª–µ–≥–∫–∏–π" },
        { word: "ÎßéÎã§", meaning: "–º–Ω–æ–≥–æ" },
        { word: "Ï†ÅÎã§", meaning: "–º–∞–ª–æ" },
        { word: "Í∞ôÎã§", meaning: "–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π" },
        { word: "Îã§Î•¥Îã§", meaning: "—Ä–∞–∑–Ω—ã–π" },
        { word: "ÌïÑÏöîÌïòÎã§", meaning: "–Ω—É–∂–Ω—ã–π" },
        { word: "Ï§ëÏöîÌïòÎã§", meaning: "–≤–∞–∂–Ω—ã–π" },
        { word: "Í¥úÏ∞ÆÎã§", meaning: "–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π, –Ω–µ–ø–ª–æ—Ö–æ–π" },
        { word: "Í∏∏Îã§", meaning: "–¥–ª–∏–Ω–Ω—ã–π" },
        { word: "ÏòàÏÅòÎã§", meaning: "–∫—Ä–∞—Å–∏–≤–æ" },
        { word: "Î©ãÏûàÎã§", meaning: "–∫—Ä—É—Ç–æ" },
        { word: "Í∑ÄÏóΩÎã§", meaning: "–º–∏–ª–æ" }
    ]
};

// –¢–µ–∫—É—â–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –∏ —á–∞—Å—Ç–∏—Ü—ã
let currentVerb = "Í∞ÄÎã§";
let selectedEnding = null;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
function initGame() {
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –±–∞–Ω–∫ –≥–ª–∞–≥–æ–ª–æ–≤
    const verbList = document.getElementById('verbList');
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–∞–≥–æ–ª—ã
    trainingWords.verbs.forEach(item => {
        addWordToBank(item.word, item.meaning, 'verb');
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ
    trainingWords.adjectives.forEach(item => {
        addWordToBank(item.word, item.meaning, 'adjective');
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
    resetMnidaGame();
}

// –í—ã–±–æ—Ä –æ–∫–æ–Ω—á–∞–Ω–∏—è
function selectEnding(ending) {
    selectedEnding = ending;
    document.getElementById('mnidaBtn').classList.remove('selected', 'wrong');
    document.getElementById('seumnidaBtn').classList.remove('selected', 'wrong');
    document.getElementById(ending + 'Btn').classList.add('selected');
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞ –≤ –±–∞–Ω–∫
function addWordToBank(word, meaning, type) {
    const listId = 'verbList';
    const list = document.getElementById(listId);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–≥–æ —Å–ª–æ–≤–∞
    const existing = Array.from(list.children).find(item => 
        item.textContent.startsWith(word)
    );
    if (existing) return;
    
    const div = document.createElement('div');
    div.className = 'word-item';
    div.textContent = `${word} (${meaning})`;
    div.onclick = () => {
        currentVerb = word;
        resetMnidaGame();
        document.getElementById('mnidaWordInput').value = word;
    };
    list.appendChild(div);
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à–∏ Enter
function handleKeyPress(event, type) {
    if (event.key === 'Enter') {
        checkMnidaWord();
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–∏–º–≤–æ–ª –∫–æ—Ä–µ–π—Å–∫–æ–π –≥–ª–∞—Å–Ω–æ–π
function isKoreanVowel(char) {
    const vowels = ['„Öè', '„Öë', '„Öì', '„Öï', '„Öó', '„Öõ', '„Öú', '„Ö†', '„Ö°', '„Ö£', 
                   '„Öê', '„Öí', '„Öî', '„Öñ', '„Öò', '„Öô', '„Öö', '„Öù', '„Öû', '„Öü', '„Ö¢'];
    
    if (vowels.includes(char)) return true;
    
    if (char.charCodeAt(0) >= 0xAC00 && char.charCodeAt(0) <= 0xD7A3) {
        const code = char.charCodeAt(0) - 0xAC00;
        return code % 28 === 0;
    }
    
    return false;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ª–∏ —Å–ª–æ–≤–æ –Ω–∞ „Ñπ
function endsWithL(word) {
    if (word.length === 0) return false;
    
    const lastChar = word[word.length - 1];
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª „Ñπ
    if (lastChar === '„Ñπ') return true;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ–≥ –Ω–∞ „Ñπ
    if (lastChar.charCodeAt(0) >= 0xAC00 && lastChar.charCodeAt(0) <= 0xD7A3) {
        const code = lastChar.charCodeAt(0) - 0xAC00;
        const finalConsonant = code % 28;
        return finalConsonant === 8; // 8 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç „Ñπ
    }
    
    return false;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è —Å–ª–æ–≤–∞ –Ω–∞ –∫—É–±–∏–∫–∏
function createWordCubes(word, highlightLastVowel = false, highlightLastConsonant = false) {
    const container = document.createElement('div');
    container.style.display = 'flex';
    container.style.justifyContent = 'center';
    container.style.flexWrap = 'wrap';
    
    for (let i = 0; i < word.length; i++) {
        const cube = document.createElement('div');
        cube.className = 'cube';
        cube.textContent = word[i];
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã–¥–µ–ª—è—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –±—É–∫–≤—É
        if (i === word.length - 1) {
            if (highlightLastVowel && isKoreanVowel(word[i])) {
                cube.classList.add('vowel');
            } 
            else if (highlightLastConsonant && !isKoreanVowel(word[i])) {
                cube.classList.add('consonant');
            }
        }
        
        container.appendChild(cube);
    }
    
    return container;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
function checkMnidaWord() {
    const inputWord = document.getElementById('mnidaWordInput').value.trim();
    
    if (!inputWord) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≥–ª–∞–≥–æ–ª –∏–ª–∏ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ');
        return;
    }
    
    if (!inputWord.endsWith('Îã§')) {
        alert('–°–ª–æ–≤–æ –¥–æ–ª–∂–Ω–æ –æ–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ "Îã§"');
        return;
    }
    
    if (!selectedEnding) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ („ÖÇÎãàÎã§ –∏–ª–∏ ÏäµÎãàÎã§)');
        return;
    }
    
    const root = inputWord.slice(0, -1);
    const lastChar = root[root.length - 1];
    const isVowel = isKoreanVowel(lastChar);
    const hasL = endsWithL(root);
    const correctEnding = (isVowel || hasL) ? 'mnida' : 'seumnida';
    const isCorrect = selectedEnding === correctEnding;
    
    currentVerb = inputWord;
    
    // –û—á–∏—â–∞–µ–º –≤—Å–µ –∫—É–±–∏–∫–∏
    const originalCubes = document.getElementById('mnidaOriginalCubes');
    const rootCubes = document.getElementById('mnidaRootCubes');
    const combinedCubes = document.getElementById('mnidaCombinedCubes');
    const correctCubes = document.getElementById('mnidaCorrectCubes');
    
    originalCubes.innerHTML = '';
    rootCubes.innerHTML = '';
    combinedCubes.innerHTML = '';
    correctCubes.innerHTML = '';
    
    // –°–æ–∑–¥–∞–µ–º –∫—É–±–∏–∫–∏ –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞
    const verbCubes = createWordCubes(inputWord);
    originalCubes.appendChild(verbCubes);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∞–∫—Ü–∏—é
    const emoji = document.getElementById('mnidaEmoji');
    emoji.textContent = isCorrect ? 'üòä' : 'üò¢';
    emoji.className = isCorrect ? 'emoji happy' : 'emoji sad';
    emoji.style.animation = isCorrect ? 'celebrate 1s' : 'shake 0.5s';
    emoji.style.opacity = '1';
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ
    originalCubes.style.display = 'flex';
    rootCubes.style.display = 'none';
    combinedCubes.style.display = 'none';
    correctCubes.style.display = 'none';
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è "Îã§"
    setTimeout(() => {
        const daCube = verbCubes.lastChild;
        daCube.style.textDecoration = 'line-through';
        daCube.style.opacity = '0.5';
        daCube.style.transition = 'all 1s ease';
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ—Ä–µ–Ω—å —Å –æ–∫–æ–Ω—á–∞–Ω–∏–µ–º
        setTimeout(() => {
            originalCubes.style.display = 'none';
            
            // –°–æ–∑–¥–∞–µ–º –∫—É–±–∏–∫–∏ –¥–ª—è –∫–æ—Ä–Ω—è
            const rootCubesContainer = document.createElement('div');
            rootCubesContainer.style.display = 'flex';
            rootCubesContainer.style.justifyContent = 'center';
            rootCubesContainer.style.flexWrap = 'wrap';
            rootCubesContainer.style.alignItems = 'center';
            
            const rootWordCubes = createWordCubes(root, isVowel, !isVowel);
            rootCubesContainer.appendChild(rootWordCubes);
            
            // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è
            const endingBtn = document.createElement('button');
            endingBtn.className = 'ending-btn';
            endingBtn.textContent = selectedEnding === 'mnida' ? '„ÖÇÎãàÎã§' : 'ÏäµÎãàÎã§';
            
            if (isCorrect) {
                endingBtn.classList.add('selected');
            } else {
                endingBtn.classList.add('wrong');
            }
            
            rootCubesContainer.appendChild(endingBtn);
            rootCubes.appendChild(rootCubesContainer);
            rootCubes.style.display = 'flex';
            
            // –ï—Å–ª–∏ –≤—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
            if (isCorrect) {
                // –ï—Å–ª–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–µ „ÖÇÎãàÎã§
                if (selectedEnding === 'mnida') {
                    setTimeout(() => {
                        rootCubes.style.display = 'none';
                        
                        // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                        let combinedWord;
                        if (hasL) {
                            // –î–ª—è —Å–ª–æ–≤, –æ–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è –Ω–∞ „Ñπ
                            combinedWord = root.slice(0, -1) + combineVowelWithBatchim(root[root.length - 1], '„ÖÇ') + 'ÎãàÎã§';
                        } else {
                            // –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–æ–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è –Ω–∞ –≥–ª–∞—Å–Ω—É—é)
                            combinedWord = combineVowelWithBatchim(root, '„ÖÇ') + 'ÎãàÎã§';
                        }
                        
                        const combinedWordCubes = createWordCubes(combinedWord);
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å merged –∫ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–º—É —Å–ª–æ–≥—É
                        const mergedSyllableIndex = root.length - 1;
                        if (combinedWordCubes.children[mergedSyllableIndex]) {
                            combinedWordCubes.children[mergedSyllableIndex].classList.add('merged');
                        }
                        
                        combinedCubes.appendChild(combinedWordCubes);
                        combinedCubes.style.display = 'flex';
                        
                        // –ê–Ω–∏–º–∞—Ü–∏—è —Å–ª–∏—è–Ω–∏—è –≤—Å–µ—Ö —Å–ª–æ–≥–æ–≤
                        const cubes = Array.from(combinedWordCubes.children);
                        cubes.forEach((cube, index) => {
                            cube.style.animation = `merge 0.5s ${index * 0.1}s forwards`;
                        });
                    }, 1000);
                } else {
                    // –î–ª—è ÏäµÎãàÎã§ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–≥–∏
                    setTimeout(() => {
                        rootCubes.style.display = 'none';
                        
                        // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
                        const mergedWord = root + 'ÏäµÎãàÎã§';
                        const mergedCubes = createWordCubes(mergedWord);
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å merged –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–ª–æ–≥—É
                        const lastSyllableIndex = root.length - 1;
                        if (mergedCubes.children[lastSyllableIndex]) {
                            mergedCubes.children[lastSyllableIndex].classList.add('merged');
                        }
                        
                        // –ó–∞–º–µ–Ω—è–µ–º –∫—É–±–∏–∫–∏ –Ω–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ
                        combinedCubes.innerHTML = '';
                        combinedCubes.appendChild(mergedCubes);
                        combinedCubes.style.display = 'flex';
                        
                        // –ê–Ω–∏–º–∞—Ü–∏—è —Å–ª–∏—è–Ω–∏—è
                        const cubes = Array.from(mergedCubes.children);
                        cubes.forEach((cube, index) => {
                            cube.style.animation = `merge 0.5s ${index * 0.1}s forwards`;
                        });
                    }, 1000);
                }
            } else {
                // –î–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
                setTimeout(() => {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                    rootCubes.style.display = 'none';
                    
                    const correctAnswerContainer = document.createElement('div');
                    correctAnswerContainer.style.display = 'flex';
                    correctAnswerContainer.style.justifyContent = 'center';
                    correctAnswerContainer.style.flexWrap = 'wrap';
                    correctAnswerContainer.style.alignItems = 'center';
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ—Ä–µ–Ω—å
                    const rootCubes = createWordCubes(root);
                    correctAnswerContainer.appendChild(rootCubes);
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ
                    const correctEndingBtn = document.createElement('button');
                    correctEndingBtn.className = 'ending-btn selected';
                    correctEndingBtn.textContent = correctEnding === 'mnida' ? '„ÖÇÎãàÎã§' : 'ÏäµÎãàÎã§';
                    correctAnswerContainer.appendChild(correctEndingBtn);
                    
                    correctCubes.appendChild(correctAnswerContainer);
                    correctCubes.style.display = 'flex';
                    
                    // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã —Å–∫—Ä—ã–≤–∞–µ–º —ç–º–æ–¥–∑–∏
                    setTimeout(() => {
                        emoji.style.opacity = '0';
                    }, 3000);
                }, 1000);
            }
        }, 1000);
    }, 500);
}


// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≥–ª–∞—Å–Ω–æ–π —Å „ÖÇ
function combineVowelWithBatchim(char, batchim) {
    if (char.length === 0) return char + batchim;
    
    const combinations = {
        'Í∞Ä': 'Í∞ë', 'ÎÇò': 'ÎÇ©', 'Îã§': 'Îãµ', 'Îßà': 'Îßô', 'Î∞î': 'Î∞•',
        'ÏÇ¨': 'ÏÇΩ', 'ÏïÑ': 'Ïïï', 'Ïûê': 'Ïû°', 'Ï∞®': 'Ï∞π', 'Ïπ¥': 'Ïπ©',
        'ÌÉÄ': 'ÌÉë', 'Ìåå': 'Ìåù', 'Ìïò': 'Ìï©',
        'Í∞ú': 'Í∞≠', 'ÎÇ¥': 'ÎÉÖ', 'ÎåÄ': 'Îãµ', 'Îß§': 'Îßµ', 'Î∞∞': 'Î∞•',
        'ÏÉà': 'ÏÇΩ', 'Ïï†': 'Ïï±', 'Ïû¨': 'Ïû°', 'Ï±Ñ': 'Ï±ï', 'Ï∫ê': 'Ï∫°',
        'ÌÉú': 'ÌÉ≠', 'Ìå®': 'Ìåù', 
        'Í≥†': 'Í≥±', 'ÎÖ∏': 'ÎÜâ', 'ÎèÑ': 'Îèï', 'Î™®': 'Î™π', 'Î≥¥': 'Î¥Ö',
        'ÏÜå': 'ÏÜù', 'Ïò§': 'Ïòµ', 'Ï°∞': 'Ï¢Å', 'Ï¥à': 'Ï¥ô', 'ÏΩî': 'ÏΩ•',
        'ÌÜ†': 'ÌÜ±', 'Ìè¨': 'ÌèΩ', 'Ìò∏': 'Ìôâ',
        'Íµ¨': 'ÍµΩ', 'ÎàÑ': 'Îàï', 'Îëê': 'Îë°', 'Î¨¥': 'Î≠Ö', 'Î∂Ä': 'Î∂ë',
        'Ïàò': 'Ïà©', 'Ïö∞': 'ÏõÅ', 'Ï£º': 'Ï§ç', 'Ï∂î': 'Ï∂•', 'Ïø†': 'Ïø±',
        'Ìà¨': 'ÌàΩ', 'Ìë∏': 'Ìíâ', 'ÌõÑ': 'Ìõï',
        'Í∏∞': 'ÍπÅ', 'Îãà': 'Îãô', 'Îîî': 'Îî•', 'ÎØ∏': 'Î∞â', 'ÎπÑ': 'Îπï',
        'Ïãú': 'Ïã≠', 'Ïù¥': 'ÏûÖ', 'ÏßÄ': 'Ïßë', 'Ïπò': 'Ïπ©', 'ÌÇ§': 'ÌÇµ',
        'Ìã∞': 'ÌåÅ', 'Ìîº': 'Ìïç', 'Ìûà': 'Ìûô',
        'Îùº': 'Îûç', 'Îü¨': 'ÎüΩ', 'Î°ú': 'Î°≠', 'Î£®': 'Î£π', 'Î¶¨': 'Î¶Ω',
        'Í≥µÎ∂ÄÌïò': 'Í≥µÎ∂ÄÌï©','Ïì∞': 'ÏîÅ','ÎÇò': 'ÎÇ©','Îì§': 'Îì≠','Ïïå': 'Ïïï',
        'Î•¥': 'Î¶Ö', 'Í±±Ï†ïÌïò': 'Í±±Ï†ïÌï©',
        'ÎÜçÎã¥Ìïò': 'ÎÜçÎã¥Ìï©', 'ÎßåÎÇò': 'ÎßåÎÇ©', 'ÎßêÌïò': 'ÎßêÌï©', 'ÏÉùÍ∞ÅÌïò': 'ÏÉùÍ∞ÅÌï©', 'Î™®Î•¥': 'Î™®Î¶Ö', 
        'Í∏∞ÏñµÌïò': 'Í∏∞ÏñµÌï©', 'ÏõêÌïò': 'ÏõêÌï©', 'Ï¢ãÏïÑÌïò': 'Ï¢ãÏïÑÌï©', 'Ïã´Ïñ¥Ìïò': 'Ïã´Ïñ¥Ìï©', 'ÎèÑÏôÄÏ£º': 'ÎèÑÏôÄÏ§ç', 
        'Í∏∞Îã§Î¶¨': 'Í∏∞Îã§Î¶Ω', 'Ìó§Ïñ¥ÏßÄ': 'Ìó§Ïñ¥Ïßë', 'Ìåî': 'Ìåù', 'Í∞ÄÏßÄ': 'Í∞ÄÏßë', 'Î≥¥ÎÇ¥': 'Î≥¥ÎÉÖ',
        'ÎèÑÏ∞©Ìïò': 'ÎèÑÏ∞©Ìï©', 'Ï∂úÎ∞úÌïò': 'Ï∂úÎ∞úÌï©', 'Ïù¥ÏÇ¨Ìïò': 'Ïù¥ÏÇ¨Ìï©', 'ÏÇ¥': 'ÏÇΩ', 'ÌÉúÏñ¥ÎÇò': 'ÌÉúÏñ¥ÎÇ©',
        'Í∞ÄÎ•¥Ïπò': 'Í∞ÄÎ•¥Ïπ©', 'ÏùºÌïò': 'ÏùºÌï©', 'Ïâ¨': 'ÏâΩ', 'ÎÜÄ': 'ÎÜâ', 'Ïö¥ÎèôÌïò': 'Ïö¥ÎèôÌï©',
        'Îõ∞': 'ÎúÅ', 'Ï∂§Ï∂î': 'Ï∂§Ï∂•', 'ÎÖ∏ÎûòÌïò': 'ÎÖ∏ÎûòÌï©', 'Í∑∏Î¶¨': 'Í∑∏Î¶Ω', 'Í≥†Ïπò': 'Í≥†Ïπ©', 
         'Ìïò': 'Ìï©', 'Ìïò': 'Ìï©', 'Ìïò': 'Ìï©', 'Ìïò': 'Ìï©', 'Ìïò': 'Ìï©', 
        'ÏöîÎ¶¨Ìïò': 'ÏöîÎ¶¨Ìï©', 'ÎßàÏãú': 'ÎßàÏã≠', 'ÏûêÎ•¥': 'ÏûêÎ¶Ö', 'Î∂à': 'Î∂ë', 'ÏãúÏûëÌïò': 'ÏãúÏûëÌï©', 
        'ÎÅùÎÇò': 'ÎÅùÎÇ©', 'Ïó¥': 'ÏóΩ', 'Îì§Ïñ¥Ïò§': 'Îì§Ïñ¥Ïòµ', 'ÎÇòÍ∞Ä': 'ÎÇòÍ∞ë', 'ÏùºÏñ¥ÎÇò': 'ÏùºÏñ¥ÎÇ©',
        'Íπ®': 'Íππ', 'Ïö∏': 'ÏõÅ', 'ÎÇòÏÅò': 'ÎÇòÏÅ©', 'ÌÅ¨': 'ÌÅΩ', 'ÎπÑÏã∏': 'ÎπÑÏåâ',
        'Ïã∏': 'Ïåâ', 'Îπ†Î•¥': 'Îπ†Î¶Ö', 'ÎäêÎ¶¨': 'ÎäêÎ¶Ω', 'ÏòàÏÅò': 'ÏòàÏÅ©', 'ÎòëÎòëÌïò': 'ÎòëÎòëÌï©',
        'ÌñâÎ≥µÌïò': 'ÌñâÎ≥µÌï©', 'Ïä¨ÌîÑ': 'Ïä¨Ìîï', 'Î∞∞Í≥†ÌîÑ': 'Î∞∞Í≥†Ìîï', 'Î™©ÎßàÎ•¥': 'Î™©ÎßàÎ¶Ö', 'ÌîºÍ≥§Ìïò': 'ÌîºÍ≥§Ìï©',
        'ÏïÑÌîÑ': 'ÏïÑÌîï', 'Í±¥Í∞ïÌïò': 'Í±¥Í∞ïÌï©', 'Îã§Î•¥': 'Îã§Î¶Ö', 'ÌïÑÏöîÌïò': 'ÌïÑÏöîÌï©', 'Ï§ëÏöîÌïò': 'Ï§ëÏöîÌï©',
        'Í∏∏': 'ÍπÅ'
    };
    
    if (combinations[char]) {
        return combinations[char];
    }
    return char + batchim;
}

// –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –∏–≥—Ä—ã
function resetMnidaGame() {
    const originalCubes = document.getElementById('mnidaOriginalCubes');
    const rootCubes = document.getElementById('mnidaRootCubes');
    const combinedCubes = document.getElementById('mnidaCombinedCubes');
    const correctCubes = document.getElementById('mnidaCorrectCubes');
    
    originalCubes.innerHTML = '';
    rootCubes.innerHTML = '';
    combinedCubes.innerHTML = '';
    correctCubes.innerHTML = '';
    
    const verbCubes = createWordCubes(currentVerb);
    originalCubes.appendChild(verbCubes);
    
    originalCubes.style.display = 'flex';
    rootCubes.style.display = 'none';
    combinedCubes.style.display = 'none';
    correctCubes.style.display = 'none';
    
    document.getElementById('mnidaEmoji').style.opacity = '0';
    document.getElementById('mnidaWordInput').value = '';
    selectedEnding = null;
    document.getElementById('mnidaBtn').classList.remove('selected', 'wrong');
    document.getElementById('seumnidaBtn').classList.remove('selected', 'wrong');
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç Web Speech API)
function speakKorean(text) {
    if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'ko-KR';
        utterance.rate = 0.8;
        
        const voices = window.speechSynthesis.getVoices();
        const koreanVoice = voices.find(voice => voice.lang === 'ko-KR');
        
        if (koreanVoice) {
            utterance.voice = koreanVoice;
        }
        
        speechSynthesis.speak(utterance);
    } else {
        alert('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Chrome –∏–ª–∏ Edge.');
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.addEventListener('load', initGame);
    </script>
</body>
</html>
